(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){e.exports=a(121)},119:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(75),c=a.n(o),s=a(124),i=a(14),l=a(17),u=a(18),m=a(22),p=a(19),h=a(23),d=a(125),b=a(122),f=a(123);var E=Object(i.b)(function(e){return{loggedIn:e.currentUser}})(function(e){return e.loggedIn?r.a.createElement(f.a,{to:"/in/search"}):r.a.createElement("section",{className:"intro"},r.a.createElement("header",{role:"banner"},r.a.createElement("p",null,"Trendlier is for those who like to keep on top of the latest gadgets and trends. "),r.a.createElement("p",null,"Get a list of the top ten hottest items in each category, listed in descending order based on popularity."),r.a.createElement("p",null,"Purchase your favorites or save them in your wishlist."),r.a.createElement(b.a,{to:"/users/login"},"Sign In"),r.a.createElement(b.a,{to:"/users/create"},"Sign Up")))}),g=a(31),v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSelectChange=function(e){e.preventDefault(),e.target.value&&a.props.onGetCategory&&a.props.onGetCategory(a.event.target.value)},a.onChange=a.onChange.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"js-search-form"},r.a.createElement("label",{className:"search-label"},"Please select a category from the drop down menu:",r.a.createElement("select",{name:"category",className:"category-name",autofocus:!0,onChange:this.handleSelectChange},r.a.createElement("option",null,"Category"),r.a.createElement("option",{value:"abcat0401000"},"Digital Cameras"),r.a.createElement("option",{value:"pcmcat242800050021"},"Health, Fitness & Beauty"),r.a.createElement("option",{value:"abcat0204000"},"Headphones"),r.a.createElement("option",{value:"pcmcat241600050001"},"Home Audio"),r.a.createElement("option",{value:"pcmcat254000050002"},"Home Automation & Security"),r.a.createElement("option",{value:"pcmcat209000050006"},"iPad, Tablets & E-Readers"),r.a.createElement("option",{value:"abcat0502000"},"Laptops"),r.a.createElement("option",{value:"pcmcat310200050004"},"Portable & Wireless Speakers"),r.a.createElement("option",{value:"abcat0101000"},"TVs"))))}}]),t}(r.a.Component);var j,y,O=Object(i.b)(function(e){return{loggedIn:null!==e.auth.currentUser}})(function(e){return e.loggedIn?r.a.createElement("div",{className:"search-form"},r.a.createElement(v,null)):r.a.createElement(f.a,{to:"/"})}),S=a(62),w=a(69),T=a(38),U=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){!e.meta.active&&this.props.meta.active&&this.input.focus()}},{key:"render",value:function(){var e,t,a=this;return this.props.meta.touched&&this.props.meta.error&&(e=r.a.createElement("div",{className:"form-error"},this.props.meta.error)),this.props.meta.touched&&this.props.meta.warning&&(t=r.a.createElement("div",{className:"form-warning"},this.props.meta.warning)),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",{htmlFor:this.props.input.name},this.props.label,e,t),r.a.createElement("input",Object.assign({},this.props.input,{id:this.props.input.name,type:this.props.type,ref:function(e){return a.input=e}})))}}]),t}(r.a.Component),N=a(78),C=a(79),k=a.n(C),_=a(24),A=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_BASE_URL||"https://trendlier-server-capstone.herokuapp.com",P=function(e){return{type:"AUTH_ERROR",error:e}},R=function(e){return e.ok?e:e.headers.has("content-type")&&e.headers.get("content-type").startsWith("application/json")?e.json().then(function(e){return Promise.reject(e)}):Promise.reject({code:e.status,message:e.statusText})},x=function(e,t){var a=k()(e);t(function(e){return{type:"SET_AUTH_TOKEN",authToken:e}}(e)),t({type:"AUTH_SUCCESS",currentUser:a.user}),function(e){try{localStorage.setItem("authToken",e)}catch(t){}}(e)},I=function(e,t){return function(a){return a({type:"AUTH_REQUEST"}),fetch("".concat(A,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(function(e){return R(e)}).then(function(e){return e.json()}).then(function(e){var t=e.authToken;return x(t,a)}).catch(function(e){var t=401===e.code?"Incorrect username or password":"Unable to login, please try again";return a(P(e)),Promise.reject(new _.a({_error:t}))})}},H=function(e){return e?void 0:"Required"},F=function(e){return""!==e.trim()?void 0:"Cannot be empty"},L=function(e){return e.trim()===e?void 0:"Cannot start or end with whitespace"},D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).onSubmit=a.onSubmit.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onSubmit",value:function(e){return this.props.dispatch(I(e.username,e.password))}},{key:"render",value:function(){var e,t=this;return this.props.error&&(e=r.a.createElement("div",{className:"form-error","aria-live":"polite"},this.props.error)),this.props.loggedIn?r.a.createElement(f.a,{to:"/dashboard/search"}):r.a.createElement("section",{className:"login"},r.a.createElement("form",{className:"login-form",onSubmit:this.props.handleSubmit(function(e){return t.onSubmit(e)})},e,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Sign In"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(S.a,{component:U,type:"text",name:"username",id:"username",validate:[H,F]}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(S.a,{component:U,type:"password",name:"password",id:"password",validate:[H,F]}),r.a.createElement("button",{disabled:this.props.pristine||this.props.submitting},"Log in"))),r.a.createElement(b.a,{to:"/register"},"Sign up"))}}]),t}(r.a.Component),G=Object(w.a)({form:"login",onSubmitFail:function(e,t){return t(Object(T.a)("login","username"))}})(D),B=(j={min:4,max:72},function(e){return j.min&&e.length<j.min?"Must be at least ".concat(j.min," characters long"):j.max&&e.length>j.max?"Must be at most ".concat(j.max," characters long"):void 0}),J=(y="password",function(e,t){return y in t&&e.trim()===t[y].trim()?void 0:"Does not match"}),V=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onSubmit",value:function(e){var t=this,a=e.username,n=e.password,r=e.firstName,o=e.lastName,c={username:a,password:n,firstName:r,lastName:o};return this.props.dispatch(function(e){return function(t){return fetch("".concat(A,"/users/create"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return R(e)}).then(function(e){return e.json()}).catch(function(e){var t=e.reason,a=e.message,n=e.location;if("ValidationError"===t)return Promise.reject(new _.a(Object(N.a)({},n,a)))})}}(c)).then(function(){return t.props.dispatch(I(a,n))})}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"signup"},r.a.createElement("form",{className:"signup-form",onSubmit:this.props.handleSubmit(function(t){return e.onSubmit(t)})},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Sign Up"),r.a.createElement("label",{htmlFor:"firstName"},"First name"),r.a.createElement(S.a,{component:U,type:"text",name:"firstName"}),r.a.createElement("label",{htmlFor:"lastName"},"Last name"),r.a.createElement(S.a,{component:U,type:"text",name:"lastName"}),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(S.a,{component:U,type:"text",name:"username",validate:[H,F,L]}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(S.a,{component:U,type:"password",name:"password",validate:[H,B,L]}),r.a.createElement("label",{htmlFor:"passwordConfirm"},"Confirm password"),r.a.createElement(S.a,{component:U,type:"password",name:"passwordConfirm",validate:[H,F,J]}),r.a.createElement("button",{type:"submit",disabled:this.props.pristine||this.props.submitting},"Register"))),r.a.createElement(b.a,{to:"/login"},"Sign up"))}}]),t}(r.a.Component),W=Object(w.a)({form:"registration",onSubmitFail:function(e,t){return t(Object(T.a)("registration",Object.keys(e)[0]))}})(V);function K(e){return r.a.createElement("p",{className:"welcome"},"Welcome, ",e.person,"!")}var M=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(s.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(d.a,{exact:!0,path:"/dashboard/user",render:function(){return r.a.createElement(K,{person:e.props.loggedIn})}}),r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement(b.a,{to:"/"},"Trendlier"))),r.a.createElement(d.a,{exact:!0,path:"/",component:E}),r.a.createElement(d.a,{exact:!0,path:"/auth/login",component:G}),r.a.createElement(d.a,{exact:!0,path:"/auth/signup",component:W}),r.a.createElement(d.a,{exact:!0,path:"/dashboard/search",render:function(){return r.a.createElement(O,{person:e.props.loggedIn})}})))}}]),t}(n.Component),Q=Object(i.b)(function(e){return{loggedIn:e.currentUser,error:e.error}})(M),q=a(7),Y=a(63),z=a(82),X={authToken:null,currentUser:null,loading:!1,error:null,category:null},Z=Object(q.d)(Object(q.c)({form:Y.a,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;return"SET_AUTH_TOKEN"===t.type?Object.assign({},e,{authToken:t.authToken,loading:!1}):"CLEAR_AUTH"===t.type?Object.assign({},e,{authToken:null,currentUser:null}):"AUTH_REQUEST"===t.type?Object.assign({},e,{loading:!0,error:null}):"AUTH_SUCCESS"===t.type?Object.assign({},e,{loading:!1,currentUser:t.currentUser}):"AUTH_ERROR"===t.type?Object.assign({},e,{loading:!1,error:t.error}):"GET_CATEGORY"===t.type?Object.assign({},e,{category:t.category}):e}}),Object(q.a)(z.a));a(119);c.a.render(r.a.createElement(i.a,{store:Z},r.a.createElement(s.a,null,r.a.createElement(Q,null))),document.getElementById("root"))}},[[108,2,1]]]);
//# sourceMappingURL=main.ae152e80.chunk.js.map